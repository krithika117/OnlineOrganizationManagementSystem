@model Teams

@{
    ViewData["Title"] = "Create";
}

<h1>Create</h1>

<h4>Teams</h4>
<hr />
<div class="row">
    <div class="col-md-4">
        <form asp-action="Create">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group">
                <label asp-for="Name" class="control-label"></label>
                <input asp-for="Name" class="form-control" />
                <span asp-validation-for="Name" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Description" class="control-label"></label>
                <input asp-for="Description" class="form-control" />
                <span asp-validation-for="Description" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="UIUXDeveloperId" class="control-label"></label>
                <select asp-for="UIUXDeveloperId" class="form-control dropdown" asp-items="ViewBag.UIUXDeveloperId"></select>
            </div>
            <div class="form-group">
                <label asp-for="FrontendDeveloperId" class="control-label"></label>
                <select asp-for="FrontendDeveloperId" class="form-control dropdown" asp-items="ViewBag.FrontendDeveloperId"></select>
            </div>
            <div class="form-group">
                <label asp-for="BackendDeveloperId" class="control-label"></label>
                <select asp-for="BackendDeveloperId" class="form-control dropdown" asp-items="ViewBag.BackendDeveloperId"></select>
            </div>
            <div class="form-group">
                <label asp-for="TesterId" class="control-label"></label>
                <select asp-for="TesterId" class="form-control dropdown" asp-items="ViewBag.TesterId"></select>
            </div>
            <div class="form-group">
                <label asp-for="TeamLeadId" class="control-label"></label>
                <select asp-for="TeamLeadId" class="form-control dropdown" asp-items="ViewBag.TeamLeadId"></select>
            </div>
            <div class="form-group">
                <label asp-for="ReportsToId" class="control-label"></label>
                <select asp-for="ReportsToId" class="form-control dropdown" asp-items="ViewBag.ReportsToId"></select>
            </div> 
            <div class="form-group">
                <label asp-for="ProjectStatus" class="control-label"></label>
                <select asp-for="ProjectStatus" class="form-control dropdown">
                    <option value="Onprogress">Onprogress</option>
                    <option value="Completed">Completed</option>
                </select>
            </div>
            <div class="form-group">
                <input type="submit" value="Create" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>

<div>
    <a asp-action="Index">Back to List</a>
</div>


@section Scripts {

    <script>
        $(document).ready(function () {
            var selectedEmployees = [];

            $(".dropdown").change(function () {
                var selectedEmployee = $(this).val();
                var otherDropdowns = $(".dropdown").not(this);

                // Disable selected employee in all other dropdowns
                otherDropdowns.find("option[value='" + selectedEmployee + "']").prop("hidden", true);

                // Enable all previously selected employees in this dropdown
                $(this).find("option").prop("hidden", false);
                $(this).find("option").each(function () {
                    if ($.inArray($(this).val(), selectedEmployees) !== -1) {
                        $(this).prop("hidden", true);
                    }
                });

                // Update selected employees list
                if ($.inArray(selectedEmployee, selectedEmployees) === -1) {
                    selectedEmployees.push(selectedEmployee);
                }
            }).focus(function () {
                // Store the current value on focus
                previousValue = $(this).val();
            }).change(function () {
                // Enable the previously selected option in all other dropdowns
                var previousValue = $(this).data("prev");
                var otherDropdowns = $(".dropdown").not(this);
                otherDropdowns.find("option[value='" + previousValue + "']").prop("hidden", false);

                // Remove the previously selected employee from the array
                var index = selectedEmployees.indexOf(previousValue);
                if (index !== -1) {
                    selectedEmployees.splice(index, 1);
                }

                // Store the current value on focus
                $(this).data("prev", $(this).val());
            });
        });
    </script>

    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}